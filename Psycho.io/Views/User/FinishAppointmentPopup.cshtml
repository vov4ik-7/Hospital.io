@model Psycho.io.Models.User.FinishAppointmentViewModel

<div class="col-md-12 mb-4">
    <div class="modal-content form-elegant">
        <div class="modal-header text-center">
            <h3 class="modal-title w-100 dark-grey-text font-weight-bold" id="myModalLabel"><strong>Finish appointment</strong></h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body mx-4">
            <input id="finishAppointmentId" value="@Model.AppointmentId" hidden/>
            <div class="row">
                <div class="col-md-12">
                    <div class="md-form mb-0">
                        Services
                        <div id="selectedServices" class="col-md-12" style="border: 1px solid #ccc; padding: 0.5em 16px; border-radius: 16px; min-height: 40px">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" style="margin-top:20px;">
                <div class="col-md-12">
                    <button class="btn btn-primary dropdown-toggle btn-sm" type="button" id="addServicesBtn" data-toggle="dropdown">
                        Add services
                    </button>

                    <div class="dropdown-menu dropdown-primary" id="servicesSearch" style="padding: 8px; max-height: 300px; overflow-y:auto;">
                        <input class="form-control" type="text" placeholder="Search" aria-label="Search">
                        @foreach (var service in Model.Services)
                        {
                            <a class="dropdown-item service-item" service-id="@service.Id">@service.Name</a>
                        }
                    </div>

                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-12">
                    <div class="text-center mb-3">
                        <button onclick="finishAppointment()" class="btn blue-gradient btn-block btn-rounded z-depth-1a">Save changes</button>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    $('#servicesSearch').mdbDropSearch();
    $('.service-item').click(function (e) {
        var serviceId = $(this).attr("service-id");
        var serviceValue = $(this).text();
        var chip = `<div class='chip' service-id='${serviceId}'>${serviceValue}<i class='close fas fa-times'></i></div>`;
        $("#selectedServices").append(chip);
    });
</script>
